
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ICRA Tutorial 4, Leveraging (Contradictory) Prior Data &#8212; NavAbility ICRA2022 Tutorials</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-examples.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/js/hoverxref.js"></script>
    <script src="../../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../../_static/js/micromodal.min.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Tutorial 3: Insufficient Data (2D Range-only)" href="icra-3-rangeonly.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">NavAbility ICRA2022 Tutorials</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python SDK
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="icra-1-simple.html">
   Tutorial 1: Creating and Solving Factor Graphs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="icra-2-nongaussian.html">
   Tutorial 2: Non-Gaussian Measurements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="icra-3-rangeonly.html">
   Tutorial 3: Insufficient Data (2D Range-only)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   ICRA Tutorial 4, Leveraging (Contradictory) Prior Data
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/NavAbility/BinderNotebooks/main?urlpath=tree/docs/python/navability-sdk/icra-4-contradictorydata.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/NavAbility/BinderNotebooks/"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/NavAbility/BinderNotebooks//issues/new?title=Issue%20on%20page%20%2Fpython/navability-sdk/icra-4-contradictorydata.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/python/navability-sdk/icra-4-contradictorydata.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ICRA Tutorial 4, Leveraging (Contradictory) Prior Data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#youtube-walk-through-video">
     YouTube Walk Through Video:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applications-leveraging-data-and-detecting-discrepancies">
     Applications Leveraging Data and Detecting Discrepancies
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#beyond-brute-force-automation-while-retaining-prior-knowledge">
       Beyond “Brute-Force” Automation while Retaining Prior Knowledge
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prior-contradictory-data">
       Prior (Contradictory) Data
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#room-with-a-door">
         Room with a Door
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#icra-survey">
   ICRA Survey
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-packages">
     Import Packages
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#build-a-multi-hypothesis-factor-graph">
     Build a Multi-hypothesis Factor Graph
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#loading-known-prior-data">
       Loading Known Prior Data
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solving-the-room-only-graph">
       Solving the Room-only Graph
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#the-room-only-graph-structure">
         The Room-only Graph Structure
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#map-of-prior-data">
         Map of Prior Data
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-robotic-measurements-multihypo">
     Add Robotic Measurements (
     <code class="docutils literal notranslate">
      <span class="pre">
       multihypo=
      </span>
     </code>
     )
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solve-and-visualize-the-multi-hypo-factor-graph">
       Solve and Visualize the Multi-hypo Factor Graph
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robot-moves-to-position-x1">
     Robot Moves to Position
     <code class="docutils literal notranslate">
      <span class="pre">
       x1
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robot-moves-to-position-x2">
     Robot Moves to Position
     <code class="docutils literal notranslate">
      <span class="pre">
       x2
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-robot-senses-the-door">
     The Robot Senses the Door!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#door-as-navigation-affordance-with-duality">
       Door as Navigation-Affordance with Duality
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#final-graph-structure">
       Final Graph Structure
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#re-solve-to-ensure-stable-unimodal-result">
       Re-solve to ensure Stable Unimodal Result
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#only-one-hypothesis-remains">
       Only one hypothesis remains!
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resolved-correct-localization-mapping-hypothesis">
     Resolved Correct Localization/Mapping Hypothesis
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#door-orientation-is-contradictory">
     Door Orientation is Contradictory
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion-and-next-steps">
     Conclusion and Next Steps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#navigation-affordances">
       Navigation-Affordances
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#multi-hypothesis-for-data-association">
       Multi-hypothesis for Data Association
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#contrast-to-non-gaussian-measurements">
       Contrast to Non-Gaussian Measurements
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#on-manifold-operations">
       On-Manifold Operations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solving-the-graph-via-the-bayes-tree">
       Solving the Graph via the Bayes Tree
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ICRA Tutorial 4, Leveraging (Contradictory) Prior Data</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ICRA Tutorial 4, Leveraging (Contradictory) Prior Data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#youtube-walk-through-video">
     YouTube Walk Through Video:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applications-leveraging-data-and-detecting-discrepancies">
     Applications Leveraging Data and Detecting Discrepancies
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#beyond-brute-force-automation-while-retaining-prior-knowledge">
       Beyond “Brute-Force” Automation while Retaining Prior Knowledge
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prior-contradictory-data">
       Prior (Contradictory) Data
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#room-with-a-door">
         Room with a Door
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#icra-survey">
   ICRA Survey
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-packages">
     Import Packages
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#build-a-multi-hypothesis-factor-graph">
     Build a Multi-hypothesis Factor Graph
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#loading-known-prior-data">
       Loading Known Prior Data
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solving-the-room-only-graph">
       Solving the Room-only Graph
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#the-room-only-graph-structure">
         The Room-only Graph Structure
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#map-of-prior-data">
         Map of Prior Data
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-robotic-measurements-multihypo">
     Add Robotic Measurements (
     <code class="docutils literal notranslate">
      <span class="pre">
       multihypo=
      </span>
     </code>
     )
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solve-and-visualize-the-multi-hypo-factor-graph">
       Solve and Visualize the Multi-hypo Factor Graph
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robot-moves-to-position-x1">
     Robot Moves to Position
     <code class="docutils literal notranslate">
      <span class="pre">
       x1
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robot-moves-to-position-x2">
     Robot Moves to Position
     <code class="docutils literal notranslate">
      <span class="pre">
       x2
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-robot-senses-the-door">
     The Robot Senses the Door!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#door-as-navigation-affordance-with-duality">
       Door as Navigation-Affordance with Duality
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#final-graph-structure">
       Final Graph Structure
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#re-solve-to-ensure-stable-unimodal-result">
       Re-solve to ensure Stable Unimodal Result
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#only-one-hypothesis-remains">
       Only one hypothesis remains!
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resolved-correct-localization-mapping-hypothesis">
     Resolved Correct Localization/Mapping Hypothesis
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#door-orientation-is-contradictory">
     Door Orientation is Contradictory
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion-and-next-steps">
     Conclusion and Next Steps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#navigation-affordances">
       Navigation-Affordances
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#multi-hypothesis-for-data-association">
       Multi-hypothesis for Data Association
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#contrast-to-non-gaussian-measurements">
       Contrast to Non-Gaussian Measurements
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#on-manifold-operations">
       On-Manifold Operations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#solving-the-graph-via-the-bayes-tree">
       Solving the Graph via the Bayes Tree
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="icra-tutorial-4-leveraging-contradictory-prior-data">
<h1>ICRA Tutorial 4, Leveraging (Contradictory) Prior Data<a class="headerlink" href="#icra-tutorial-4-leveraging-contradictory-prior-data" title="Permalink to this headline">#</a></h1>
<p><strong>API Version: Python <a class="reference external" href="http://NavAbilitySDK.py">NavAbilitySDK.py</a></strong></p>
<section id="youtube-walk-through-video">
<h2>YouTube Walk Through Video:<a class="headerlink" href="#youtube-walk-through-video" title="Permalink to this headline">#</a></h2>
<p>You can follow along with a YouTube walk through recording of this Tutorial notebook:</p>
<p><a class="reference external" href="https://youtu.be/z1pFg_V4MIs"><img alt="Tutorial 4 Walk Through" src="https://img.youtube.com/vi/z1pFg_V4MIs/0.jpg" /></a></p>
</section>
<section id="applications-leveraging-data-and-detecting-discrepancies">
<h2>Applications Leveraging Data and Detecting Discrepancies<a class="headerlink" href="#applications-leveraging-data-and-detecting-discrepancies" title="Permalink to this headline">#</a></h2>
<p>Many industrial equipment/tools/robotics today are constrained to very rigid automation regimes.  The following applications will be disrupted by navigation-affordance technology:</p>
<ul class="simple">
<li><p>Reconfiguring manufacturing automation such as <strong>picking or packing</strong> using both asynchronous measurements and user desired programming,</p></li>
<li><p>Enhanced <strong>automation in surveyor Total Stations</strong> for lowering operational costs on construction sites,</p></li>
<li><p>Validation of <strong>“as-designed” vs. “as-built” in construction</strong> using design plans as affordances,</p></li>
<li><p>Metrology in <strong>manufacturing verification of part dimensions</strong> based on “as-designed” 3D solid models,</p></li>
<li><p><strong>Rapid localization of underwater robotics</strong> in obscure environments using prior maps of semi-known environments,</p>
<ul>
<li><p>e.g. relative navigation to known subsea infrastructure in energy or aquaculture,</p></li>
</ul>
</li>
<li><p><strong>Discrepancy detection</strong> through robotic inspection but detecting contradictions between intended and robotically mapped,</p>
<ul>
<li><p>e.g. kelp farming installation status check that growth lines are not broken,</p></li>
</ul>
</li>
<li><p>And many more.</p></li>
</ul>
<p>This tutorial shows how prior data can be used to support as well as constrain robotic state-estimation tasks, while also gaining robustness to contradictory data.  This tutorial will show how to combine prior and new measurement data through multi-hypothesis robustness.</p>
<section id="beyond-brute-force-automation-while-retaining-prior-knowledge">
<h3>Beyond “Brute-Force” Automation while Retaining Prior Knowledge<a class="headerlink" href="#beyond-brute-force-automation-while-retaining-prior-knowledge" title="Permalink to this headline">#</a></h3>
<p>To ground this tutorial, we take an example from production/manufacturing.  Robotic factory lines are often difficult to reconfigure – i.e. are inflexible.  Developing more reactionary robotic systems based on real-time sensor data is challenging.  One of the critical needs for application specialists is an ability to expand robotic operations beyond rigid “brute force” (open-loop) automation whereby the human can incorporate/restrain a robot with <strong>better judgement</strong> (i.e. prior knowledge).</p>
<p>Conventional manufacturing and warehouse automation technologies operate via “brute force” or “playback” control strategies where robot operations follow a very narrow preprogrammed path.  One of the major challenges in AI development for manufacturing and warehouse applications is to make the high value robotic equipment more flexible / reconfigurable so that the systems can more rapidly be reconfigured between different tasks.</p>
<p>One of the key challenges to expanding the automation software capabilities requires a balance between</p>
<ul class="simple">
<li><p>programming the robot with human readible prior information about the task; as well as</p></li>
<li><p>letting the robotic automation handle more of the fine grain numerical operations relating to the task at hand.</p></li>
</ul>
<p>The figure below shows a motivational example where prior knowledge—i.e. the corners of a rectangle and door opening—is to be used for robotic mapping operations.</p>
<p><img alt="Tutorial 4 Room Prior" src="static/icra-4/room-prior.png" /></p>
<p>The figure above illustrates some robotic equipment (a.k.a. the robot) which must be localized relative to a known rectangular shape.  For simplicity, we introduce the door orientation as the only ambiguity which must be mapped by the robot – i.e. we know there is a door, but have not yet verified the hinging orientation.</p>
<p>The challenge of this tutorial is localizing and mapping the robot relative to the object as efficiently as possible, and have the solution be robust to possibly contradictory prior data.  For the sake of illustration, we simplify the possible contradiction to the door orientation only, and invite the interested reader to see the <a class="reference external" href="https://www.navability.io/applications/construction/">NavAbility Construction Application example</a> and associated publications for a more elaborate discussion on navigation-affordances.</p>
</section>
<section id="prior-contradictory-data">
<h3>Prior (Contradictory) Data<a class="headerlink" href="#prior-contradictory-data" title="Permalink to this headline">#</a></h3>
<p>This tutorial will demonstrate through a simplified example how prior (contradictory) data can be leveraged in a localization and mapping solution using factor graphs.  We want to pre-load our robotic system with some basic information about the environment in which it will be operating so that it can more easily resolve it’s position and navigate around.</p>
<section id="room-with-a-door">
<h4>Room with a Door<a class="headerlink" href="#room-with-a-door" title="Permalink to this headline">#</a></h4>
<p>Prior info:</p>
<ul class="simple">
<li><p>A rectangular room with the 4 corners as defining known navigation affordances,</p></li>
<li><p>An orientation sensitive door affordance which should* be hinged on the left side (which is buried in the data as an easter egg for the solver to discover as valid or contradictory).</p></li>
</ul>
</section>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="icra-survey">
<h1>ICRA Survey<a class="headerlink" href="#icra-survey" title="Permalink to this headline">#</a></h1>
<p>Thanks for doing our tutorials! We really want to make sure this is valuable for you.</p>
<p>This <a class="reference external" href="https://docs.google.com/forms/d/e/1FAIpQLScQiZHguPN7YP18-VhfbqqQw621EswuBIJZj191x70CPrCiKw/viewform?vc=0&amp;c=0&amp;w=1&amp;flr=0">quick 2 minute survey</a> will help us improve them for next year’s workshop.</p>
<section id="import-packages">
<h2>Import Packages<a class="headerlink" href="#import-packages" title="Permalink to this headline">#</a></h2>
<p>The first step load all the necessary packages, as listed in code blocks hereafter.  The following commented code block is only necessary if your environment does not have the necessary packages installed for whatever reason (uncomment and run once if package are not installed).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # ONLY IF REQUIRED, Install a pip package in the current Jupyter kernel</span>
<span class="c1"># import sys</span>
<span class="c1"># !{sys.executable} -m pip install navabilitysdk</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">navability.entities</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">navability.services</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<p>We will also use the following door orientation printout function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">printHingedDoor</span><span class="p">(</span><span class="n">ornt</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;resolved&quot;</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">ornt</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Door affordance </span><span class="si">%s</span><span class="s1"> as left hinged&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Door affordance </span><span class="si">%s</span><span class="s1"> as right hinged&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="build-a-multi-hypothesis-factor-graph">
<h2>Build a Multi-hypothesis Factor Graph<a class="headerlink" href="#build-a-multi-hypothesis-factor-graph" title="Permalink to this headline">#</a></h2>
<p>We start with an empty factor graph object, which is created with default solver parameters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># also create a client connection</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">NavAbilityHttpsClient</span><span class="p">()</span>
<span class="c1"># a unique userId:robotId</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s2">&quot;guest@navability.io&quot;</span><span class="p">,</span> <span class="s2">&quot;SDKpy_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;Tutorial4_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Also a few basic noise parameters</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prior_distr</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">]),</span><span class="mi">2</span><span class="p">)</span>
<span class="n">dual_distr</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)]),</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="loading-known-prior-data">
<h3>Loading Known Prior Data<a class="headerlink" href="#loading-known-prior-data" title="Permalink to this headline">#</a></h3>
<p>Next, add to the factor graph the four corner prior knowledge about the room, namely <code class="docutils literal notranslate"><span class="pre">c0</span></code>, <code class="docutils literal notranslate"><span class="pre">c1</span></code>, <code class="docutils literal notranslate"><span class="pre">c2</span></code>, <code class="docutils literal notranslate"><span class="pre">c3</span></code>, each with their expected location in the world via <code class="docutils literal notranslate"><span class="pre">PriorPose2</span></code> unary factor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>

<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;c0&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">prior_distr</span><span class="p">)))</span> 
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">prior_distr</span><span class="p">)))</span> 
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;c2&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">prior_distr</span><span class="p">)))</span> 
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;c3&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">prior_distr</span><span class="p">)))</span> 
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Also add the prior information regarding the door, and note for this simplified tutorial is using two affordance variables.  Two variables is part of the <em>affordance-duality</em> construct where contradictions between prior known and ultimately discovered data can manifest in either the prior or dual variables, respectfully:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;door_prior&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;door_dual&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>

<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;door_prior&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">prior_distr</span><span class="p">)))</span> 
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;door_dual&quot;</span><span class="p">],</span> <span class="n">PriorPose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">dual_distr</span><span class="p">)))</span>
<span class="n">result_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="solving-the-room-only-graph">
<h3>Solving the Room-only Graph<a class="headerlink" href="#solving-the-room-only-graph" title="Permalink to this headline">#</a></h3>
<p>Let’s make sure our prior data makes sense by solving the factor graph with the available data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wait for graph modifications to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">result_ids</span><span class="p">)</span>

<span class="c1"># request a solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;client&#39;: OrderedDict([(&#39;userId&#39;, &#39;guest@navability.io&#39;), (&#39;robotId&#39;, &#39;SDKpy_8a26&#39;), (&#39;sessionId&#39;, &#39;Tutorial4_e54a&#39;)])}
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>running solve...
</pre></div>
</div>
</div>
</div>
<p>While the solve is running, let’s look so long at the factor graph so far, and look at the map thereafter…</p>
<section id="the-room-only-graph-structure">
<h4>The Room-only Graph Structure<a class="headerlink" href="#the-room-only-graph-structure" title="Permalink to this headline">#</a></h4>
<p>The basic room structure in the factor graph is also of interest.  Let’s go ahead and look at what the graph structure looks like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">GraphVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">variableStartsWith</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://app.navability.io/cloud/graph/?userId=guest@navability.io&amp;robotStartsWith=SDKpy_8a26&amp;sessionStartsWith=Tutorial4_e54a&amp;variableStartsWith
</pre></div>
</div>
<p><a class="reference external" href="https://app.navability.io/cloud/graph/?userId=guest&#64;navability.io&amp;robotStartsWith=SDKpy_8a26&amp;sessionStartsWith=Tutorial4_e54a&amp;variableStartsWith"><img alt="Navigate to Factor Graph" src="http://www.navability.io/wp-content/uploads/2022/03/factor_graph.png" /></a></p>
</div>
</div>
<p>The graph plot above shows the simple factor graph so far, where four corner and dual door variables each have a prior factor.  We are now ready to introduce new robotic measurements into the factor graph.</p>
</section>
<section id="map-of-prior-data">
<h4>Map of Prior Data<a class="headerlink" href="#map-of-prior-data" title="Permalink to this headline">#</a></h4>
<p>After completing the earlier solve, we can use the NavAbility WebApp to visualize the numerical values of the variables in the graph.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Give it a few seconds JIT compiling during first run.</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [10],</span> in <span class="ni">&lt;cell line: 5&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.10.9/x64/lib/python3.10/site-packages/navability/services/utils.py:62,</span> in <span class="ni">MapVizApp</span><span class="nt">(client, variableStartsWith)</span>
<span class="g g-Whitespace">     </span><span class="mi">60</span> <span class="k">if</span> <span class="n">variableStartsWith</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">61</span>     <span class="n">geometry_vis_link</span> <span class="o">=</span> <span class="n">geometry_vis_link</span> <span class="o">+</span> <span class="s2">&quot;&amp;variableStartsWith&quot;</span>
<span class="ne">---&gt; </span><span class="mi">62</span>     <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">variableStartsWith</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">63</span>         <span class="n">geometry_vis_link</span> <span class="o">=</span> <span class="n">geometry_vis_link</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="n">variableStartsWith</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span> <span class="nb">print</span><span class="p">(</span><span class="n">geometry_vis_link</span><span class="p">)</span>

<span class="ne">TypeError</span>: object of type &#39;NoneType&#39; has no len()
</pre></div>
</div>
</div>
</div>
<p>The plot shows the four corners as a rectangle between <code class="docutils literal notranslate"><span class="pre">(0,0)</span></code> and <code class="docutils literal notranslate"><span class="pre">(20,10)</span></code>, as well as a door at <code class="docutils literal notranslate"><span class="pre">(20,4)</span></code>.  We also confirm the door prior data orientation which to the best of our current knowledge is <strong>left hinged</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">door</span> <span class="o">=</span> <span class="k">await</span> <span class="n">getVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;door_prior&quot;</span><span class="p">)</span>
<span class="n">printHingedDoor</span><span class="p">(</span><span class="n">door</span><span class="o">.</span><span class="n">ppes</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">suggested</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="s2">&quot;prior&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Door affordance prior as left hinged
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="add-robotic-measurements-multihypo">
<h2>Add Robotic Measurements (<code class="docutils literal notranslate"><span class="pre">multihypo=</span></code>)<a class="headerlink" href="#add-robotic-measurements-multihypo" title="Permalink to this headline">#</a></h2>
<p>We would like to localize our robotic system relative to the available prior data above.  The first thing the robot does is measure one of the corners relative to it’s own position (i.e. <strong>a relative, not global, measurement</strong>).  Since we do not know which of the corners this measurement relates to, we will use the <code class="docutils literal notranslate"><span class="pre">multihypo=</span></code> keyword with equal <code class="docutils literal notranslate"><span class="pre">1/4</span></code> probability to each of the four known corners:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add first pose variable</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;x0&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>

<span class="c1"># add multihypo factor to corner affordances</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;x0&quot;</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">],</span> 
                        <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))),</span> 
                        <span class="n">multihypo</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">])</span> 

<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">result_id</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Above we first added a new robot ‘pose’ variable <code class="docutils literal notranslate"><span class="pre">x0</span></code>.  We then added a relative <code class="docutils literal notranslate"><span class="pre">Pose2Pose2</span></code> factor which represents a rigid transform between the robot and the measured corner.  Note, the measurement is local to the robot (i.e. not a global metrology-type measurement).  Also note that the <code class="docutils literal notranslate"><span class="pre">Pose2Pose2</span></code> factor is usually binary between two variables but now, with the <code class="docutils literal notranslate"><span class="pre">multihypo=</span></code> keyword, is associated with five variables.  The first is the robot pose <code class="docutils literal notranslate"><span class="pre">x0</span></code> with <code class="docutils literal notranslate"><span class="pre">100%</span></code> certainty, while the next four corner affordance variables have fractional association certainty of <code class="docutils literal notranslate"><span class="pre">25%</span></code> each.</p>
<section id="solve-and-visualize-the-multi-hypo-factor-graph">
<h3>Solve and Visualize the Multi-hypo Factor Graph<a class="headerlink" href="#solve-and-visualize-the-multi-hypo-factor-graph" title="Permalink to this headline">#</a></h3>
<p>Let’s start a new solve and look at the factor graph structure while the computation is running:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># request a new solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>They multi-hypo factor is represented in the factor graph as any other n-ary factor</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">GraphVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_28_0.png" src="../../_images/icra-4-contradictorydata_28_0.png" />
</div>
</div>
<p>Let’s recap what the factor represents and what we are expecting to see.  We know there are four corners to a room and we have one relative measurement to a corner.  Therefore, the robot should be relatively positioned to one of the four known corners – i.e. we expect to see a multi-modal posterior belief estimate on the robot pose <code class="docutils literal notranslate"><span class="pre">x0</span></code>.  Let’s plot the numerical results to see:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wait for solve to complete...</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_30_0.png" src="../../_images/icra-4-contradictorydata_30_0.png" />
</div>
</div>
<p>On the NavAbility App visualization, remember to enable the SHOW BELIEF button to see the underlying variable posterior belief estimates.</p>
<p>As predicted, there are four separate modes in the posterior marginal estimate of <code class="docutils literal notranslate"><span class="pre">x0</span></code>, one nearby each of the four known corners of the room.  Note that each of these modes also have a marginal belief over the orientation of the robot which corresponds to the relative transform to the measured corner.</p>
<p>The critcal point here is that even though the factor graph does not have a unimodal solution, we are able to perform a solve on the graph and recover the correct non-Gaussian marginal posterior result.</p>
</section>
</section>
<section id="robot-moves-to-position-x1">
<h2>Robot Moves to Position <code class="docutils literal notranslate"><span class="pre">x1</span></code><a class="headerlink" href="#robot-moves-to-position-x1" title="Permalink to this headline">#</a></h2>
<p>The next step towards mapping while localizating the robot relative to prior data is moving the robot and making more measurements.  To get to the second position, we move the robot forward by <code class="docutils literal notranslate"><span class="pre">2</span></code> units and rotate clockwise (around positive <code class="docutils literal notranslate"><span class="pre">z</span></code>) by <code class="docutils literal notranslate"><span class="pre">90deg</span></code>; this transform is captured in another rigid transform <code class="docutils literal notranslate"><span class="pre">Pose2Pose2</span></code> factor to a new variable <code class="docutils literal notranslate"><span class="pre">x1</span></code>.  Once at <code class="docutils literal notranslate"><span class="pre">x1</span></code> the robot makes a second corner measurement for which we again don’t know the association:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>

<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;x0&quot;</span><span class="p">,</span> <span class="s2">&quot;x1&quot;</span><span class="p">],</span> 
                            <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">4.</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))),</span>
                            <span class="n">nullhypo</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">],</span> 
                            <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))),</span> 
                            <span class="n">multihypo</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">])</span> 

<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">result_id</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Note, that even though we know this second corner measured is a different corner than what we measured first, we lazily added the new corner measurement again as a four way equal <code class="docutils literal notranslate"><span class="pre">multihypo=</span></code> uncertainty.  We help the solver a little bit with this by allowed a bit more freedom in the solution (i.e. an additional source of entropy), but also stating that the interpose measurement might not be wholly correct – and we do this by including <code class="docutils literal notranslate"><span class="pre">nullhypo=0.5</span></code>.</p>
<p>We are therefore giving the factor graph solver less information than we actually have available.  Let’s solve the graph again and see what it finds:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># request a new solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wait for solve to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_35_0.png" src="../../_images/icra-4-contradictorydata_35_0.png" />
</div>
</div>
<p>In the App visualization, remember to use the SHOW BELIEF button to see the underlying variable beliefs.</p>
<p>You should see the marginal posterior belief for pose <code class="docutils literal notranslate"><span class="pre">x0</span></code> has reduced to two of the previous four modes, and the new <code class="docutils literal notranslate"><span class="pre">x1</span></code> pose also having two associated modes from the relative factor.  Therefore, the factor graph solution currently has two likely hypotheses contained within the numerical solution:</p>
<ul class="simple">
<li><p>Mode 1 starts with <code class="docutils literal notranslate"><span class="pre">x0</span></code> at <code class="docutils literal notranslate"><span class="pre">(2,8)</span></code> down to <code class="docutils literal notranslate"><span class="pre">x1</span></code> at <code class="docutils literal notranslate"><span class="pre">(2,4)</span></code> in affordance (rectangle coordinates), or</p></li>
<li><p>Mode 2 starts with <code class="docutils literal notranslate"><span class="pre">x0</span></code> at <code class="docutils literal notranslate"><span class="pre">(18,2)</span></code> up to <code class="docutils literal notranslate"><span class="pre">x1</span></code> at <code class="docutils literal notranslate"><span class="pre">(18,6)</span></code>.</p></li>
</ul>
</section>
<section id="robot-moves-to-position-x2">
<h2>Robot Moves to Position <code class="docutils literal notranslate"><span class="pre">x2</span></code><a class="headerlink" href="#robot-moves-to-position-x2" title="Permalink to this headline">#</a></h2>
<p>We move the robot forward by <code class="docutils literal notranslate"><span class="pre">16</span></code> units until a new boundary is detected, and add the new pose variable <code class="docutils literal notranslate"><span class="pre">x2</span></code>.  A corner is again measured, and we again lazily add the <code class="docutils literal notranslate"><span class="pre">Pose2Pose2</span></code> measurement to the new corner as a <code class="docutils literal notranslate"><span class="pre">multihypo=</span></code> factor at <code class="docutils literal notranslate"><span class="pre">1/4</span></code> association probability to any of the four prior known corners.  Strictly speaking, the factor graph builder can already deduce that the new corner measurement is likely only one of two corners from the prior data, however, the point of this tutorial is to show that the factor graph builder’s job is being simplifiedy by a more capable back-end factor graph solver.  So the new corner measurement factor is added in a lazy fashion:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="n">VariableType</span><span class="o">.</span><span class="n">Pose2</span><span class="p">)</span>

<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;x2&quot;</span><span class="p">],</span> 
                            <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">16.</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))))</span>


<span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">],</span> 
                            <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">2.</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))),</span> 
                            <span class="n">multihypo</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">])</span>

<span class="c1"># wait for graph modifications to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">result_id</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>We start a new solve and take a look at the current graph structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># request a new solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">GraphVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_40_0.png" src="../../_images/icra-4-contradictorydata_40_0.png" />
</div>
</div>
<p>We see three corner measurements that could each be associated with any of the four prior corner affordances, <code class="docutils literal notranslate"><span class="pre">(c0,c1,c2,c3)</span></code>.  We also see the three new poses <code class="docutils literal notranslate"><span class="pre">(x0,x1,x2)</span></code> connected by two relative factors.  The dual door affordance variables have not yet been sighted by the robot and only have prior factors at this time.</p>
<p>As the latest graph solve completes, we again and look at the numerical results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wait for solve to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_42_0.png" src="../../_images/icra-4-contradictorydata_42_0.png" />
</div>
</div>
<p>We find there are still two modes in each of the posterior marginal beliefs on the three poses <code class="docutils literal notranslate"><span class="pre">(x0,x1,x2)</span></code> which represent two hypotheses of how the robot is moving relative to the overall rectangular affordance.</p>
</section>
<section id="the-robot-senses-the-door">
<h2>The Robot Senses the Door!<a class="headerlink" href="#the-robot-senses-the-door" title="Permalink to this headline">#</a></h2>
<p>The last measurement made by the robot is to the door affordance, which is sensed to be <code class="docutils literal notranslate"><span class="pre">2</span></code> units ahead of the robot and to have a relative orientation to pose <code class="docutils literal notranslate"><span class="pre">x2</span></code> of <code class="docutils literal notranslate"><span class="pre">180deg</span></code>.</p>
<section id="door-as-navigation-affordance-with-duality">
<h3>Door as Navigation-Affordance with Duality<a class="headerlink" href="#door-as-navigation-affordance-with-duality" title="Permalink to this headline">#</a></h3>
<p>We will use the factor graph to extract two crucial pieces of information from the door measurement.  To do this we will use the navigation-affordance duality construct where the robot local door measurement is introduced to the factor graph using the <code class="docutils literal notranslate"><span class="pre">multihypo=</span></code> mechanism with <code class="docutils literal notranslate"><span class="pre">50/50%</span></code> likelihood between the <code class="docutils literal notranslate"><span class="pre">door_prior</span></code> and <code class="docutils literal notranslate"><span class="pre">door_dual</span></code> variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">addFactor</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="s2">&quot;door_prior&quot;</span><span class="p">,</span> <span class="s2">&quot;door_dual&quot;</span><span class="p">],</span> 
                            <span class="n">Pose2Pose2</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="n">FullNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">],</span> <span class="n">cov</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span><span class="mi">2</span><span class="p">))),</span> 
                            <span class="n">multihypo</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>

<span class="c1"># wait for graph modifications to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">result_id</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>This simplified duality example illustates an important point, that even though we have some confidence about where the door is expected to be on the rectangular shape we do not have to be right.  In this simplified example, we take a weaker prior on the position of <code class="docutils literal notranslate"><span class="pre">door_dual</span></code> but assume no direction of the door.  Our prior assumptions about the door position and orientation are tied with tight prior on the <code class="docutils literal notranslate"><span class="pre">door_prior</span></code> variable.</p>
<p>In a moment, we will show that this prior information is actually contradictory to what is being measured by the robot.  The navigation-affordance with duality construct allows us buidl a factor graph with confidence, in spite of unknow contradictions that arise from the measured data.  A more elaborate example and use of navigation-affordances with duality is described in the <a class="reference external" href="https://www.navability.io/applications/construction/">NavAbility Construction example</a> and linked publication.</p>
<p>The door orientation measurement made by the robot is a local detection on which way the door is hinged, and was included in the factor above with <code class="docutils literal notranslate"><span class="pre">mean=(2,0,pi)</span></code>.  Let’s solve the factor graph and see if any data contradictions are found and how they impact the solver performance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># request a new solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The solve will take a bit of time to complete.</p>
</section>
<section id="final-graph-structure">
<h3>Final Graph Structure<a class="headerlink" href="#final-graph-structure" title="Permalink to this headline">#</a></h3>
<p>While the solve is porcessing, we can look at the final factor graph structure a last time, where we note that all variables are now interconnected by a series of prior and new measurement data.  Building the factor graph was pretty easy, and the factor graph solver cranked through the numbers to untangle a multi-hypothesis mapping while localizing problem.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">GraphVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">variableStartsWith</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_48_0.png" src="../../_images/icra-4-contradictorydata_48_0.png" />
</div>
</div>
<p>To simplify plotting, let’s look at just the three pose variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wait for solve to complete</span>
<span class="k">await</span> <span class="n">waitForCompletion</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">solve_request</span><span class="p">],</span> <span class="n">maxSeconds</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">variableStartsWith</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_50_0.png" src="../../_images/icra-4-contradictorydata_50_0.png" />
</div>
</div>
</section>
<section id="re-solve-to-ensure-stable-unimodal-result">
<h3>Re-solve to ensure Stable Unimodal Result<a class="headerlink" href="#re-solve-to-ensure-stable-unimodal-result" title="Permalink to this headline">#</a></h3>
<p>Owing to the earlier <code class="docutils literal notranslate"><span class="pre">nullhypo=0.5</span></code> on the factor between <code class="docutils literal notranslate"><span class="pre">x0</span></code> and <code class="docutils literal notranslate"><span class="pre">x1</span></code>, it might be necessary to do a second solve to capture unimodal only beliefs.  Simply run another solve and watch the numerical results converge.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># request a new solve</span>
<span class="n">solve_request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">solveSession</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running solve...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="only-one-hypothesis-remains">
<h3>Only one hypothesis remains!<a class="headerlink" href="#only-one-hypothesis-remains" title="Permalink to this headline">#</a></h3>
<p>Plotting again with both the affordance and pose information (resetting the <code class="docutils literal notranslate"><span class="pre">variableStartsWith</span></code> filter):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Click on the generated factor graph graphic to open NavAbility App visualization</span>
<span class="n">MapVizApp</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">variableStartsWith</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/icra-4-contradictorydata_54_0.png" src="../../_images/icra-4-contradictorydata_54_0.png" />
</div>
</div>
<p>Only one trajectory mode/hypothesis remains!</p>
</section>
</section>
<section id="resolved-correct-localization-mapping-hypothesis">
<h2>Resolved Correct Localization/Mapping Hypothesis<a class="headerlink" href="#resolved-correct-localization-mapping-hypothesis" title="Permalink to this headline">#</a></h2>
<p>The plot above shows a single hypothesis for pose locations <code class="docutils literal notranslate"><span class="pre">(x0,x1,x2)</span></code> of how the robot moved relative to the rectangular object.  <strong>This resolution was extracted by making local measurements only and by leveraging prior data about the object</strong>.  Resolving the robot position relative to the object did not require any global metrology measurements, and is furthermore able to resolve discrepancies between the prior anticipated navigation affordance models and the measured data.  Let’s look at the <code class="docutils literal notranslate"><span class="pre">door</span></code> variables more closely…</p>
</section>
<section id="door-orientation-is-contradictory">
<h2>Door Orientation is Contradictory<a class="headerlink" href="#door-orientation-is-contradictory" title="Permalink to this headline">#</a></h2>
<p>The solver also resolved the correct <code class="docutils literal notranslate"><span class="pre">:door_</span></code> orientation from local robot measurement data.  We can see which door orientation was was found during measurement when comparing both the <code class="docutils literal notranslate"><span class="pre">prior</span></code> and <code class="docutils literal notranslate"><span class="pre">dual</span></code> variables.  We use a small helper function to interpret the results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">door</span> <span class="o">=</span> <span class="k">await</span> <span class="n">getVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;door_prior&quot;</span><span class="p">)</span>
<span class="n">printHingedDoor</span><span class="p">(</span><span class="n">door</span><span class="o">.</span><span class="n">ppes</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">suggested</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="s2">&quot;prior&quot;</span><span class="p">)</span>
<span class="n">door</span> <span class="o">=</span> <span class="k">await</span> <span class="n">getVariable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="s2">&quot;door_dual&quot;</span><span class="p">)</span>
<span class="n">printHingedDoor</span><span class="p">(</span><span class="n">door</span><span class="o">.</span><span class="n">ppes</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">suggested</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Door affordance prior as left hinged
Door affordance resolved as right hinged
</pre></div>
</div>
</div>
</div>
<p>This indicates that the door affordance <strong>prior information is contradictory</strong> but the factor graph solution was correctly resolved during non-Gaussian inference to a stable, unimodal solution.</p>
<p>This concludes the tutorial on multi-hypothesis factors.</p>
</section>
<section id="conclusion-and-next-steps">
<h2>Conclusion and Next Steps<a class="headerlink" href="#conclusion-and-next-steps" title="Permalink to this headline">#</a></h2>
<section id="navigation-affordances">
<h3>Navigation-Affordances<a class="headerlink" href="#navigation-affordances" title="Permalink to this headline">#</a></h3>
<p>The door orientation example is a trivial case to help connnect the multi-hypothesis factors to navigation-affordances.  Note that navigation affordances are a much deeper topic described in more detail in the <a class="reference external" href="https://www.navability.io/applications/construction/">NavAbility Construction example</a> and linked publication.</p>
<p>This example shows how prior (possibly contradictor) data can be incorporated into a localization and mapping solution, and how prior (contradictory) data can be combined with new local/relative measurement information in a human readible factor graph notation.  The value of having prior data for localization and mapping can be enormous, yet the risk of inducing unwanted errors due to contradictory data in the final problem are equally large – this tutorial shows how NavAbility’s method of leveraging contradictory prior data as well as detecting discrepancies between “as-designed” and “as-built” artifacts.</p>
<p>This tutorial shows how to use non-Gaussian inference to resolve the duality problem between measurement errors and contradictory data models by using the multi-hypothesis features in a factor graph solution.  This tutorial is in 2D on a XY-plane, and can readily be expanded to 3D or much more elaborate navigation-affordance constructs.</p>
<p>This tutorial is applicable to human operated surveyor/metrology measurement equipment; and can readily be expanded for use with more autonomous mobile robotic equipment.  This tutorial shows that the robot measurement locations are not known in advance, and that the relative translation between measurement locations can be combined with prior (possible contradictory) data for mapping and verification.</p>
<p>This tutorial together with more elaborate NavAbility publications show how known markers/features can readily be used for “as-designed” prior inforation.  For example a CAD model or floor plan of a construction.</p>
</section>
<section id="multi-hypothesis-for-data-association">
<h3>Multi-hypothesis for Data Association<a class="headerlink" href="#multi-hypothesis-for-data-association" title="Permalink to this headline">#</a></h3>
<p>This example shows one of four possible mechanisms by which non-Gaussian behavior can be introduced to a factor graph system.  To simplify the tutorial, the measurements are assumed to be purely Gaussian and non-Guassian behavior is introduced through the multi-hypothesis data association mechanism.  Other mechanisms shown in other examples can readily be added to this tutorial for a more intricate system.</p>
<p>The multi-hypothesis mechanism used in this tutorial also shows how the user can introduce discrete data association uncertainty into the estimation problem at the factor graph level.  This approach is immediately applicable to loop-closures in SLAM, as was <a class="reference external" href="https://juliarobotics.org/Caesar.jl/latest/refs/literature/">previously published – see Caesar.jl references here</a>.</p>
</section>
<section id="contrast-to-non-gaussian-measurements">
<h3>Contrast to Non-Gaussian Measurements<a class="headerlink" href="#contrast-to-non-gaussian-measurements" title="Permalink to this headline">#</a></h3>
<p>Pay close attention to to the difference from Tutorial 2 where uncertainty about ambiguous data was marginalized into the measurements that was used to generate the factors.  There is a major difference between non-Gaussian measurements in one factor vs. a unimodal factor with discrete uncertainty in association to variables – the crux of the matter is marginalization before or during inference.</p>
<p>The NavAbility platform and Caesar.jl solver allow the user to mix-and-match the four identified sources of non-Gaussian behavior in a single factor graph.  This tutorial demonstrated one of those features using mapping of a navigation-affordance as the driving example.</p>
</section>
<section id="on-manifold-operations">
<h3>On-Manifold Operations<a class="headerlink" href="#on-manifold-operations" title="Permalink to this headline">#</a></h3>
<p>All the features describe above are computed on-manifold.  For more information, see the <a class="reference external" href="https://juliarobotics.org/Caesar.jl/latest/concepts/using_manifolds/">Using Manifolds page in the Caesar.jl solver documentation</a>.</p>
</section>
<section id="solving-the-graph-via-the-bayes-tree">
<h3>Solving the Graph via the Bayes Tree<a class="headerlink" href="#solving-the-graph-via-the-bayes-tree" title="Permalink to this headline">#</a></h3>
<p>The Caesar.jl solver uses the Bayes tree find the numerical solution for the factor graphs it’s solving.  The open code has numerous features such as clique recycling a more.  To learn more about <a class="reference external" href="https://juliarobotics.org/Caesar.jl/latest/principles/bayestreePrinciples/">the Bayes tree, see the Caesar.jl documentation page here</a>.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./python/navability-sdk"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="icra-3-rangeonly.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Tutorial 3: Insufficient Data (2D Range-only)</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By NavAbility Inc.<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>